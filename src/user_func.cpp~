#include "user_func.h"

namespace lispic
{
	  Symbol call(Symbols& args)
	       {

		    Repository::VariablesEnvironment venv;
		    for(Symbols::iterator sig = signature.begin(),
			     Symbols::iterator arg = args.begin();
			sig != signature.end() &&
			     arg != args.end();
			++sig, ++arg)
		    {
			 venv[sig->name()] = arg->value();
		    }
		    Repository::Get().variables.push_back(venv);
		    Evaluator& ev = Evaluator::Get();
		    Symbol res = Evaluator::Get().eval(body);
		    Repository::Get().variables.pop_back();
		    return res;
	       }
}
